<!DOCTYPE html>
<html>
  <head>
    <title>كيفية استخدام الخطوط المُخصصة في أندرويد - custom fonts in Android Support lib 26 – محمد إبراهيم – وأنّ ليس للإنسان إلا ما سعى ..</title>

        <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    
    <meta name="description" content="إلى وقت قريب لم تكن توجد طريقة رسمية لإضافة الخطوط المخصصة لتطبيقات أندرويد، فقط بضعة حلول قام بابتكارها المجتمع لحل تلك المشلكة، أهما:
العناصر المُعدلة - custom views
في هذه الطريقة، كل ما عليك هو أن تقوم بكتابة عنصر خاص لاستبدال خطوط النظام، فإذا كنت تريد تغيير عنصر الزر مثلًا، فستقوم ببناء عنصر جديد يرث من العنصر Button، وتقوم بكتابة الكود المسؤول عن إضافة خطوطك الخاصة. الكود التالي يوضح كيفية تحديد خط العنصر، وهذا بعد إضافة الخطوط التي تريد في المسار  assets. أو في المسار assets/fonts لتنظيم الأمر قليلًا.
Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "assets/" + fontName;
setTypeface(tf);


مكتبة Calligraphy
توجد عدة مكتبات مشهورة للقيام بهذا الأمر، فمشكلة الطريقة السابقة، أن أي عنصر View تريد استبدال خطوطه، سيتوجب عليك بناء عنصر جديد يرث منه خصائصه، ثم تخصيص الخطوط التي تريد إضافتها. لذا فالمكتبة تعتبر حل سريع وعملي للقيام بالأمر، أشهر مكتبة هي Calligraphy.

">
    <meta property="og:description" content="إلى وقت قريب لم تكن توجد طريقة رسمية لإضافة الخطوط المخصصة لتطبيقات أندرويد، فقط بضعة حلول قام بابتكارها المجتمع لحل تلك المشلكة، أهما:
العناصر المُعدلة - custom views
في هذه الطريقة، كل ما عليك هو أن تقوم بكتابة عنصر خاص لاستبدال خطوط النظام، فإذا كنت تريد تغيير عنصر الزر مثلًا، فستقوم ببناء عنصر جديد يرث من العنصر Button، وتقوم بكتابة الكود المسؤول عن إضافة خطوطك الخاصة. الكود التالي يوضح كيفية تحديد خط العنصر، وهذا بعد إضافة الخطوط التي تريد في المسار  assets. أو في المسار assets/fonts لتنظيم الأمر قليلًا.
Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "assets/" + fontName;
setTypeface(tf);


مكتبة Calligraphy
توجد عدة مكتبات مشهورة للقيام بهذا الأمر، فمشكلة الطريقة السابقة، أن أي عنصر View تريد استبدال خطوطه، سيتوجب عليك بناء عنصر جديد يرث منه خصائصه، ثم تخصيص الخطوط التي تريد إضافتها. لذا فالمكتبة تعتبر حل سريع وعملي للقيام بالأمر، أشهر مكتبة هي Calligraphy.

">
    

    <meta name="author" content="محمد إبراهيم">

    
    <meta property="og:title" content="كيفية استخدام الخطوط المُخصصة في أندرويد - custom fonts in Android Support lib 26">
    <meta property="twitter:title" content="كيفية استخدام الخطوط المُخصصة في أندرويد - custom fonts in Android Support lib 26">
    


    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="محمد إبراهيم - وأنّ ليس للإنسان إلا ما سعى .." href="/feed.xml" />

    <script src="/javascripts/fontfaceobserver.js"></script>
    <script src="/javascripts/blog.js"></script>

    <!-- Created with Arabic Jekyll - http://github.com/a3ammar/arabic-jekyll -->
  </head>

  <body lang="ar">
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          
          <a href="/" class="site-avatar"><img src="https://github.com/MohamedISoliman.png" /></a>
          

          <div class="site-info">
            <h1 class="site-name"><a href="/">محمد إبراهيم</a></h1>
            <p class="site-description">وأنّ ليس للإنسان إلا ما سعى ..</p>
          </div>

          <nav>
            <a href="/about">من أنا</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container ">
      <article class="post">
  <h1>كيفية استخدام الخطوط المُخصصة في أندرويد - custom fonts in Android Support lib 26</h1>

  <div class="entry">
    <p>إلى وقت قريب لم تكن توجد طريقة رسمية لإضافة الخطوط المخصصة لتطبيقات أندرويد، فقط بضعة حلول قام بابتكارها المجتمع لحل تلك المشلكة، أهما:</p>
<h3 id="العناصر-المُعدلة---custom-views">العناصر المُعدلة - custom views</h3>
<p>في هذه الطريقة، كل ما عليك هو أن تقوم بكتابة عنصر خاص لاستبدال خطوط النظام، فإذا كنت تريد تغيير عنصر الزر مثلًا، فستقوم ببناء عنصر جديد يرث من العنصر Button، وتقوم بكتابة الكود المسؤول عن إضافة خطوطك الخاصة. الكود التالي يوضح كيفية تحديد خط العنصر، وهذا بعد إضافة الخطوط التي تريد في المسار  <strong>assets</strong>. أو في المسار <strong>assets/fonts</strong> لتنظيم الأمر قليلًا.</p>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Typeface</span> <span class="n">tf</span> <span class="o">=</span> <span class="n">Typeface</span><span class="o">.</span><span class="na">createFromAsset</span><span class="o">(</span><span class="n">getContext</span><span class="o">().</span><span class="na">getAssets</span><span class="o">(),</span> <span class="s">"assets/"</span> <span class="o">+</span> <span class="n">fontName</span><span class="o">;</span>
<span class="n">setTypeface</span><span class="o">(</span><span class="n">tf</span><span class="o">);</span>
</code></pre>
</div>
<h3 id="مكتبة-calligraphy">مكتبة Calligraphy</h3>
<p>توجد عدة مكتبات مشهورة للقيام بهذا الأمر، فمشكلة الطريقة السابقة، أن أي عنصر View تريد استبدال خطوطه، سيتوجب عليك بناء عنصر جديد يرث منه خصائصه، ثم تخصيص الخطوط التي تريد إضافتها. لذا فالمكتبة تعتبر حل سريع وعملي للقيام بالأمر، أشهر مكتبة هي <a href="https://github.com/chrisjenx/Calligraphy">Calligraphy</a>.</p>

<p>في مؤتمر Google IO الأخير أعلن فريق تطوير أندرويد عن العديد من المميزات الجديدة في مكتبة الدعم الإصدار 26، من أهمها إمكانية تخصيص الخطوط، وبما أن هذه الميزة تأتي مع مكتبة الدعم، فإن الإصدارات القديمة من أندرويد لن تجد مشكلة في إظهار هذه الخطوط.</p>

<h3 id="كيفية-استخدام-الخطوط-المخصصة-مع-مكتبة-الدعم-support-library-26">كيفية استخدام الخطوط المخصصة مع مكتبة الدعم Support library 26</h3>

<p>لتطبيق الأمر عمليًا قمت بتحميل نموذج لشاشة تسجيل ودخول موجودة مسبقًا وتستخدم الطريقة القديمة في تخصيص الخطوط، <a href="https://www.uplabs.com/posts/login-signup-ui-kit">رابط عرض وتحميل النموذج</a>. بعد تعديل ملفات Gradle وتحديث إصدار مكتبة الدعم، ثم بناء التطبيق تظهر الصورة التالية موضحة الخطوط المستخدمة في النموذج Sample.</p>

<p><img src="/images/posts/2017-10-23-custom-fonts-android/Screenshot_20171023-175232.png" alt="custom fonts Android support library 1" title="custom fonts Android support library" height="450" /></p>

<p><strong>الآن سنتبع <a href="https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml.html#using-support-lib">خطوات</a>  استخدام مكتبة الدعم ..</strong></p>

<ul>
  <li>بعد ضغط يمين الماوس على فولدر res ستظهر القائمة لنختار منها New ثم Android resource directory ومن ثم نختار نوع الفولدر font.</li>
  <li>بعد إنشاء هذا الفولدر، سننقل ملفات الخطوط الموجودة في المسار assets/fonts لمسارها الجديد والمعتمد الآن res/font. إذا كنت تستخدم نسخة أندرويد ستوديو 3.0.0 التجريبية فيمكنك الضغط على ملف الخط لاستعراضه .. اشكرني لاحقًا.</li>
  <li>والأن سنقوم بإنشاء font family  وهي تعريف مجموعة من الخطوط وطريقة العرض لكي يتعرف عليها النظام. نضغط على فولدر font ثم New وأخيرًا Font resource file.</li>
  <li>ثم نضيف الكود التالي ..</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;font-family</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span><span class="nt">&gt;</span>

<span class="c">&lt;!--regular--&gt;</span>
<span class="nt">&lt;font</span>
      <span class="na">android:font=</span><span class="s">"@font/MavenPro_Regular"</span>
      <span class="na">android:fontStyle=</span><span class="s">"normal"</span>
      <span class="na">android:fontWeight=</span><span class="s">"400"</span>
      
      <span class="na">app:font=</span><span class="s">"@font/MavenPro_Regular"</span>
      <span class="na">app:fontStyle=</span><span class="s">"normal"</span>
      <span class="na">app:fontWeight=</span><span class="s">"400"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- italic --&gt;</span>
  <span class="nt">&lt;font</span>

      <span class="na">android:font=</span><span class="s">"@font/MavenPro_Regular"</span>
      <span class="na">android:fontStyle=</span><span class="s">"italic"</span>
      <span class="na">android:fontWeight=</span><span class="s">"400"</span>
      
      <span class="na">app:font=</span><span class="s">"@font/MavenPro_Regular"</span>
      <span class="na">app:fontStyle=</span><span class="s">"italic"</span>
      <span class="na">app:fontWeight=</span><span class="s">"400"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- bold --&gt;</span>
  <span class="nt">&lt;font</span>
      <span class="na">android:font=</span><span class="s">"@font/MavenPro_Bold"</span>
      <span class="na">android:fontStyle=</span><span class="s">"normal"</span>
      <span class="na">android:fontWeight=</span><span class="s">"700"</span>
      
      <span class="na">app:font=</span><span class="s">"@font/MavenPro_Bold"</span>
      <span class="na">app:fontStyle=</span><span class="s">"normal"</span>
      <span class="na">app:fontWeight=</span><span class="s">"700"</span> <span class="nt">/&gt;</span>


<span class="nt">&lt;/font-family&gt;</span>
</code></pre>
</div>

<p><strong>ملحوظة:</strong> يجب إعادة كتابة السطور باستخدام attribute <strong>app</strong> لضمان دعم الإصدارات الأقدم من النظام.</p>

<p>الآن يمكننا استخدام هذه الخطوط برمجيًا أو عبر ملفات xml ..</p>

<p><strong>استخدامها برمجيًا</strong><br />
لا تختلف طريقة استخدام الخطوط برمجيًا عن الطريقة القديمة، الفرق أنك تجدها عبر R.font ، وتحصل عليها عبر <strong>ResourcesCompat</strong>  وعلى سبيل التجربة سنقوم بتغيير تخصيص الخطوط في العناصر المعدلة في النموذج الذي بين أيدينا. تجدها في الفولدر customfonts.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="o">(!</span><span class="n">isInEditMode</span><span class="o">())</span> <span class="o">{</span>
 	<span class="n">Typeface</span> <span class="n">tf</span> <span class="o">=</span> <span class="n">ResourcesCompat</span><span class="o">.</span><span class="na">getFont</span><span class="o">(</span><span class="n">getContext</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">font</span><span class="o">.</span><span class="na">app_font</span><span class="o">);</span>
 	<span class="n">setTypeface</span><span class="o">(</span><span class="n">tf</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>
<p>إذا قمنا بتشغيل التطبيق الآن، مفترض أن لا شيء سيتغير. لأننا نستخدم نفس الخطوط، المختلف فقط الطريقة.</p>

<p><strong>استخدامها عبر ملفات Xml</strong><br />
يمكننا استخدامها عبر attribute <strong>fontFamily</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>app:fontFamily="@font/app_font"
</code></pre>
</div>
<p>ولذلك سنقوم بتغيير custom views الموجودة في ملفات xml إلى عناصر النظام أو مكتبة الدعم، وتطبيق السطر السابق، ثم تشغيل التطبيق مرة أخرى. 
كما يمكنك استخدام app أو android للتعريف، لكن  <strong>android:fontFamily</strong> غير متاحة حتى api 16، قبل ذلك يمكنك استخدام <strong>app:fontFamily</strong>. ربما تجد lint warning لكن لا بأس .. فالتعريف صحيح. بعد تطبيق الخطوط في ملفات xml لا حاجة لنا في العناصر المعدلة الموجودة في customfonts ويمكننا حذفها.</p>

<p><strong>استخدامها عبر  ملف style</strong><br />
يمكننا كذلك استخدامها عبر ملف style لتعريف كالآتي</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;style name="TextAppearance"&gt;
        &lt;item name="fontFamily"&gt;@font/app_font&lt;/item&gt;
&lt;/style&gt;
</code></pre>
</div>

<p><strong>يمكنك إيجاد النموذج عبر <a href="https://github.com/MohamedISoliman/Custom-fonts-supportLib-26">github</a> ، ومراجعة الخطوات السابقة عبر التنقل بين الـ <a href="https://github.com/MohamedISoliman/Custom-fonts-supportLib-26/commits/master">commits</a></strong></p>

<p>مصادر:</p>

<p><a href="https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml.html">https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml.html</a>
<a href="https://segunfamisa.com/posts/custom-fonts-with-android-support-library">https://segunfamisa.com/posts/custom-fonts-with-android-support-library</a></p>


  </div>

  <div class="date">
    كُتب في 23/10/2017
  </div>

  
  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'disqus_uyW8ifaIis';

      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>


</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          

<a href="https://www.facebook.com/mi.s016"><i class="svg-icon facebook"></i></a>

<a href="https://github.com/MohamedISoliman"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/mohamedisoliman"><i class="svg-icon linkedin"></i></a>


<a href="https://www.twitter.com/mohamedisoliman"><i class="svg-icon twitter"></i></a>




        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-106142228-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/custom-fonts-android/',
		  'title': 'كيفية استخدام الخطوط المُخصصة في أندرويد - custom fonts in Android Support lib 26'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
